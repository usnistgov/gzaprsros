<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Gazebo APRS ROS: The Go Motion Pose Mathematics Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gazebo APRS ROS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Go Motion Pose Mathematics Library</div>  </div>
</div><!--header-->
<div class="contents">
<p><b>Go</b> Math Representations</p>
<p>Positions are vectors that indicate where something is. In the three-dimensional world, three numbers are necessary to indicate position. Go Motion supports position vectors in several representations: Cartesian, cylindrical and spherical.</p>
<p>The Cartesian representation uses three numbers <b>x</b>, <b>y</b> and <b>z</b> to represent distances from the origin along three perpendicular axes. The cylindrical representation uses three numbers <b>r</b>, <b>theta</b> and <b>z</b> to represent radial distance away from the origin, angle around the origin and distance up and down from the origin respectively. The spherical representation uses three numbers <b>theta</b>, <b>phi</b> and <b>r</b> to represent angle down from the zenith, angle around the origin and radius from the origin respectively. Go Motion has functions that convert position in one representation position in another representation, so the choice of which representation to use can be made for convenience. Cartesian representations will be assumed unless otherwise specified.</p>
<p>Orientations are vectors that indicate how something is rotated. In the three-dimensional world, three numbers are necessary to indicate orientation. Go Motion supports orientation vectors in several representations: roll, pitch and yaw; Euler angles; quaternions; rotation vectors and rotation matrices. Some of these representations use more than three numbers, exploiting redundancy to make calculations with these representations more efficient. For example, a quaternion uses four numbers, and a rotation matrix uses nine numbers.</p>
<p>Vectors are usually written as a column of numbers enclosed in vertical bars, like this:</p>
<p>| 1 | <br />
 | 2 | - a vector depicted in its column form <br />
 | 3 |</p>
<p>This can be unwieldy in text documentation, so vectors may also be written as a row of numbers enclosed in parentheses, like this:</p>
<p>( 1 2 3 ) - a vector depicted in its row form</p>
<p>The interpretation of a vector depends on the quantity it represents. The vector shown above could mean a translation of 1, 2 and 3 units in the x, y and z directions if the vector were a Cartesian position, or a rotation of 1, 2 and 3 units around the x, y and z directions if the vector were an orientation in roll, pitch and yaw.</p>
<p>Both position and orientation are needed to fully describe where something is and how it is rotated. The combination of position and orientation is called a 'pose'. Poses can be shown in row form like this pose representing a Cartesian position of ( 1 2 3 ) and an orientation in roll, pitch and yaw of ( 30 -30 90 ):</p>
<p>( 1 2 3 ; 30 -30 90)</p>
<p>A semicolon is used to separate the position from the orientation.</p>
<p><b>Go Math Reference Frames</b></p>
<p>Regardless of the representation chosen, the numbers that indicate position and orientation of an object depend on the established origin. Several origins may be established for convenience, for example one fixed on the world and one that moves with a tool. These origins may differ from each other in both position and orientation. The establishment of the position and orientation of an origin is a 'reference frame'. The term 'coordinate frame' is used interchangeably with 'reference frame'.</p>
<p>When several reference frames are being used, they are denoted as identifiers in braces, for example,</p>
<p>{A} - a reference frame called 'A'.</p>
<p>{world} - the world reference frame.</p>
<p>{tool} - the world reference frame.</p>
<p>To convert the representation of a pose in one reference frame to its representation in another, one needs to know the position and orientation of one origin with respect to the other. This difference between the two origins is called a 'transform'.</p>
<p>Poses and transforms are similar things; both include position and orientation. Whether something is a pose or a transform depends on how one is using it. Poses are used to indicate the position and orientation of things with respect to an established reference frame. Transforms are used to indicate the position and orientation of reference frames with respect to other reference frames. If a 'thing' happens to be a reference frame, its pose is its transform.</p>
<p><b>Go</b> Math Nomenclature</p>
<p>The letter <b>P</b> is used to denote positions and the letter <b>R</b> is used to denote orientations. As usual, trailing subscripts denote the identity of quantities, for example,</p>
<p>P<small><sub>hand</sub></small> - the position of the hand.</p>
<p>R<small><sub>head</sub></small> - the orientation of the head.</p>
<p>Leading superscripts denote the reference frame in which the quantity is expressed, for example,</p>
<p><small><sup>A</sup></small>P<small><sub>hand</sub></small> - the position of the hand with respect to the {A} reference frame.</p>
<p><small><sup>B</sup></small>R<small><sub>head</sub></small> - the orientation of the head with respect to the {B} reference frame.</p>
<p>The figure below shows a rotation of reference frame {B} with respect to reference frame {A} by an angle <b>u</b>. Note that the rotation can be viewed as a rotation of {B} with respect to {A}, denoted <small><sup>A</sup></small>u<small><sub>B</sub></small>, or as a rotation of {A} with respect to {B}, denoted <small><sup>B</sup></small>u<small><sub>A</sub></small>. The heads of arrows are attached to the 'of the' frames, while the tails of arrows are based on the 'with respect to' frames. Angles are taken as positive according the the right hand rule, so in this figure <small><sup>A</sup></small>u<small><sub>B</sub></small> is a positive number of about 45 degrees, while <small><sup>B</sup></small>u<small><sub>A</sub></small> is a negative number of the same magnitude.</p>
<div class="image">
<img src="fig002.png" alt="fig002.png"/>
</div>
 <center> <em>Figure</em> 1. </center><p>Transforms from one reference frame to another are denoted with leading subscripts and superscripts. The leading subscript denotes the original frame, and the leading superscript denotes the new frame. If a transform is purely rotation, it is denoted with an <b>R</b>, for example,</p>
<p><small><sup>B</sup><sub>A</sub></small>R - a rotation from the {A} frame to the {B} frame.</p>
<p>If a transform includes both a rotation and a translation, it is denoted with a <b>T</b>, for example,</p>
<p><small><sup>world</sup><sub>tool</sub></small>T - a transform from the {tool} frame to the {world} frame.</p>
<p>To convert a quantity from one frame to another, pre-multiply the quantity by the transform. Algebraically, the leading subscript of the transform must match the leading superscript of the quantity, for example,</p>
<p><small><sup>B</sup></small>P = <small><sup>B</sup><sub>A</sub></small>R * <small><sup>A</sup></small>P</p>
<p>This is read, 'the position with respect to the B frame is the rotation from the A frame to the B frame times the position with respect to the A frame.' Another example is,</p>
<p><small><sup>world</sup></small>P = <small><sup>world</sup><sub>tool</sub></small>T * <small><sup>tool</sup></small>P</p>
<p>This is read, 'the position with respect to the world frame is the transform from the tool frame to the world frame times the position with respect to the tool frame.'</p>
<p>One can generate a rotational transform by defining an orientation vector with the appropriate angles. If using a roll, pitch and yaw representation, the rotational transforms in the figure above (each about the <b>z</b> axis) is a yaw:</p>
<p>| &#160; 0 &#160; | <br />
 | &#160; 0 &#160; | = <small><sup>A</sup></small>R<small><sub>B</sub></small> <br />
 | <small><sup>A</sup></small>u<small><sub>B</sub></small> |</p>
<p>| &#160; 0 &#160; | <br />
 | &#160; 0 &#160; | = <small><sup>B</sup></small>R<small><sub>A</sub></small> <br />
 | <small><sup>B</sup></small>u<small><sub>A</sub></small> |</p>
<p>and negative angles work as well, for</p>
<p>| &#160;&#160; 0 &#160; | <br />
 | &#160;&#160; 0 &#160; | = <small><sup>A</sup></small>R<small><sub>B</sub></small> <br />
 | -<small><sup>B</sup></small>u<small><sub>A</sub></small> |</p>
<p><b>Go</b> Math Examples</p>
<p>Given a reference frame {B} rotated 30 degrees with respect to the <b>z</b> axis of reference frame {A}, as in Figure 1 above, transform from points in the {B} frame to points in the {A} frame like this: </p><div class="fragment"><div class="line">go_rpy rot;</div><div class="line">go_cart pt_in_b;</div><div class="line">go_cart pt_in_a;</div><div class="line"></div><div class="line"><span class="comment">// The angle of {B} with respect to {A} is 30 degrees.</span></div><div class="line"><span class="comment">// Go uses angles in radians.</span></div><div class="line">rot.r = 0, rot.p = 0, rot.y = <a class="code" href="gomath_8h.html#a257fd1bdbb4294c1bf1d2c34bfeaba42">GO_TO_RAD</a>(30);</div><div class="line"></div><div class="line">pt_in_b.x = 1, pt_in_b.y = 2, pt_in_b.z = 3;</div><div class="line"></div><div class="line"><span class="comment">// Multiply a transform and a point to get a new point.</span></div><div class="line"><a class="code" href="namespacegomotion.html#ac89b091b7958b0916f0bfffc89022751">go_rpy_cart_mult</a>(&amp;rot, &amp;pt_in_b, &amp;pt_in_a);</div><div class="line"></div><div class="line">go_cart_print(&amp;pt_in_a);</div></div><!-- fragment --><p> will print the postion of the point in the {A} frame: </p><div class="fragment"><div class="line">-0.133975 2.232051 3.000000</div></div><!-- fragment --><p> Here is a more complex example of a full transform, including both translation and rotation. </p><div class="image">
<img src="fig003.png" alt="fig003.png"/>
</div>
 <center><em>Figure</em> 2.</center><p>The frame {B} is translated and rotated with respect to {A}. <sup><small>A</small></sup>x<sub><small>B</small></sub> is the amount of translation of {B} in the <b>x</b> direction of {A}. Likewise, <sup><small>A</small></sup>y<sub><small>B</small></sub> is the amount of translation of {B} in the <b>y</b> direction of {A}. <sup><small>A</small></sup>u<sub><small>B</small></sub> is the rotation of the {B} frame about the <b>z</b> axis of the {A} frame.</p>
<p>To convert points in the {B} frame to points in the {A} frame, do this: </p><div class="fragment"><div class="line">go_pose pose;</div><div class="line">go_rpy rot;</div><div class="line">go_cart pt_in_b;</div><div class="line">go_cart pt_in_a;</div><div class="line"></div><div class="line"><span class="comment">// The translation of {B} with respect to {A} is about (2 1 0).</span></div><div class="line">pose.tran.x = 2, pose.tran.y = 1, pose.tran.z = 0;</div><div class="line"></div><div class="line"><span class="comment">// The angle of {B} wrt {A} is about 30 degrees, made into radians.</span></div><div class="line">rot.r = 0, rot.p = 0, rot.y = <a class="code" href="gomath_8h.html#a257fd1bdbb4294c1bf1d2c34bfeaba42">GO_TO_RAD</a>(30);</div><div class="line"></div><div class="line"><span class="comment">// A &#39;go_pose&#39; uses quaternions for rotations, so we have to</span></div><div class="line"><span class="comment">// convert a roll-pitch-yaw to a quaternion.</span></div><div class="line"><a class="code" href="namespacegomotion.html#a52642a38bd040eff0f768adf37e0e220">go_rpy_quat_convert</a>(&amp;rot, &amp;pose.rot);</div><div class="line"></div><div class="line">pt_in_b.x = 1, pt_in_b.y = 2, pt_in_b.z = 3;</div><div class="line"></div><div class="line"><span class="comment">// Multiply a transform and a point to get a new point.</span></div><div class="line"><a class="code" href="namespacegomotion.html#a824ae41bfa7ef450d36ab67fc9e49aaf">go_pose_cart_mult</a>(&amp;pose, &amp;pt_in_b, &amp;pt_in_a);</div><div class="line"></div><div class="line">go_cart_print(&amp;pt_in_a);</div></div><!-- fragment --><p> This gives the transformed point in the {A} frame as </p><div class="fragment"><div class="line">1.866025 3.232051 3.000000</div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
